<!DOCTYPE HTML>
<html>

<head>
	<title>Sportswear</title>
	<link rel="icon" href="./images/bolsa-de-la-compra.png">
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" />
	</noscript>
</head>

<body class="is-preload">

	<!-- Sidebar -->
	<section id="sidebar">
		<div class="inner">
			<nav>
				<ul>
					<li><a href="#intro">inicio</a></li>
					<li><a href="#one">¿Cómo funciona este servicio de Analítica? </a></li>
					<li><a href="#two">¿Cómo acceder a las visualizaciones?</a></li>
					<li><a href="#three">Gráficas en tiempo real</a></li>
				</ul>
			</nav>
		</div>
	</section>

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Intro -->
		<section id="intro" class="wrapper style1 fullscreen fade-up">
			<div class="inner">
				<img src="images/SportSwearStore.png" class="image" style="height: 220px !important;" alt=""
					data-position="center center" />
				<h1>Sportswear Store data analysis</h1>
				<p>Bienvenidos al servicio de analítica de datos en tiempo real para la tienda<br> Sportswear Store. <a
						href="https://github.com/DCajiao/sportswear_store_v2">Encuentra más información aquí</a></p>
				<ul class="actions">
					<li><a href="#one" class="button scrolly"
							style="background-color: rgba(162, 0, 255, 0.623);">Llévame ahí</a></li>
				</ul>
			</div>
		</section>

		<!-- One -->
		<section id="one" class="wrapper style1 spotlights">
			<section>
				<img src="https://raw.githubusercontent.com/DCajiao/sportswear_store_v2/main/diagrams/architecture.png"
					alt="Diagrama de Arquitectura" data-position="center center" class="image"
					style="width: 650px; height: 400px;" />
				<div class="content">
					<div class="inner">
						<h2>¿Cómo funciona este servicio de Analítica?</h2>
						<ol>
							<li>Los datos se crean desde el servicio de la tienda (Backend en Java).</li>
							<li>Los datos de la tienda son almacenados en MongoDB Atlas.</li>
							<li>Los datos son consultados por la API de analítica a MongoDB Atlas (API en Python).</li>
							<li>Se crean visualizaciones con los datos obtenidos.</li>
							<li>Esas visualizaciones son consultadas e insertadas al Frontend</li>
						</ol>
						<ul class="actions">
							<li><a href="#two" class="button scrolly"
									style="background-color: rgba(162, 0, 255, 0.623);">¿Cómo acceder a las
									visualizaciones?</a></li>
						</ul>
						<br><br><br>
					</div>
				</div>

			</section>
			<br><br>
		</section>
		<br>
		<!-- Two -->
		<section id="two">
			<section class="wrapper style2 spotlights inner">
				<br>
				<h2>
					<center>¿Cómo acceder a las visualizaciones?</center>
				</h2>
				<section>
					<div>
						<img src="images/bolsa-de-la-compra.png" alt="" data-position="center center" class="image"
							style="width: 200px; height: 200px;" />
						<img src="images/visualizacion-de-datos.png" alt="" data-position="center center" class="image"
							style="width: 200px; height: 200px;" />
						<img src="images/api.png" alt="" data-position="center center" class="image"
							style="width: 200px; height: 200px;" />
						<img src="images/servidor-caido.png" alt="" data-position="center center" class="image"
							style="width: 200px; height: 200px;" />
					</div>
					<div class="content">
						<div class="inner">
							<h3>¿Cómo acceder a las visualizaciones?</h3>
							<p>A continuación verás 9 preguntas sobre las cuales se realizó la analítica de datos con
								sus respectivas gráficas y querys con el que se obtuvo esa información directamente
								desde MongoDB Atlas.</p>
							<p>La API tiene una cuota de recepción de peticiones relativamente pequeña, debido a todas
								las funciones que debe ejecutar para crear cada gráfica, de manera que debes usar el
								botón para recargar las gráficas una por una</p>
							<ul class="actions">
								<li><a href="#three" class="button scrolly"
										style="background-color: rgba(162, 0, 255, 0.623);">Veamos las gráficas</a></li>
							</ul>
							<br><br>
						</div>
						<br><br>
					</div>
				</section>
			</section>
		</section>


		<!-- Three -->
		<section id="three" class="wrapper style1 fade-up">
			<section class="wrapper style2 spotlights inner">
				<br>
				<h2>
					<center>Gráficas en tiempo real</center>
				</h2>

				<br>
				<section id="pregunta1"> <!-- Pregunta 1-->
					<img src="" data-src="https://sportswear-store-data-analysis-api.onrender.com/top_places"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 690px; height: 690px;" />
					<div class="content">
						<div class="inner">
							<h3>1. ¿Qué lugares han recibido más envíos?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>{
								"$group": {<br>
								"_id": "$lugar_id",<br>
								"totalEnvios": { "$sum": 1 }}},<br><br>
								{"$lookup": {<br>
								"from": "Lugares",<br>
								"localField": "_id",<br>
								"foreignField": "_id",<br>
								"as": "lugar"}},<br><br>
								{"$unwind": "$lugar"},<br><br>
								{"$sort": { "totalEnvios": -1 }},<br><br>
								{"$limit": 3},<br><br>
								{"$project": {
								"_id": 0,<br>
								"lugar": "$lugar.nombre",<br>
								"totalEnvios":
								}}<br></blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta1')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
				<section id="pregunta2"> <!-- Pregunta 2-->
					<img src="" data-src="https://sportswear-store-data-analysis-api.onrender.com/top_purchases_by_date"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 690px; height: 690px;" />
					<div class="content">
						<div class="inner">
							<h3>2. ¿Cuáles son las 3 fechas en las que se han realizado más compras?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>{
								"$group": {<br>
								"_id": { "$dateToString": { "format": "%Y-%m-%d", "date": "$fechaCompra" }},<br>
								"totalCompras": { "$sum": 1 }}},<br><br>
								{"$sort": { "totalCompras": -1 }},<br><br>
								{"$limit": 3},<br><br>
								{"$project": {<br>
								"_id": 0,<br>
								"fecha": "$_id",<br>
								"totalCompras": 1}}</blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta2')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
				<section id="pregunta3"> <!-- Pregunta 3-->
					<img src="" data-src="https://sportswear-store-data-analysis-api.onrender.com/sales_by_section"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 690px; height: 690px;" />
					<div class="content">
						<div class="inner">
							<h3>3. ¿Cuántas ventas se han realizado por cada sección?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>{"$unwind": "$detallesCompra" },<br><br>
								{"$lookup": {<br>
								"from": "Productos",<br>
								"localField": "detallesCompra.producto_id",<br>
								"foreignField": "_id",<br>
								"as": "producto"}},<br><br>
								{ "$unwind": "$producto" },<br><br>
								{"$group": {<br>
								"_id": "$producto.seccionArticulo",<br>
								"totalVentas": { "$sum": 1 }}},<br><br>
								{ "$sort": { "totalVentas": -1 } },<br><br>
								{ "$limit": 3 },<br><br>
								{"$project": {<br>
								"_id": 0,<br>
								"seccion": "$_id",<br>
								"totalVentas": 1}}</blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta3')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
				<section id="pregunta4"> <!-- Pregunta 4-->
					<img src="" data-src="https://sportswear-store-data-analysis-api.onrender.com/products_by_type"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 690px; height: 690px;" />
					<div class="content">
						<div class="inner">
							<h3>4. ¿Cuántos productos de cada tipo tiene la tienda?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>{"$group": {<br>
								"_id": "$tipoProducto",<br>
								"cantidad": { "$sum": 1 }}},<br><br>
								{"$match": {<br>
								"_id": { "$in": ["Articulo", "Diseno", "Paquete"]}}}</blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta4')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
				<section id="pregunta5"> <!-- Pregunta 5-->
					<img src=""
						data-src="https://sportswear-store-data-analysis-api.onrender.com/top_3_expensive_products"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 690px; height: 690px;" />
					<div class="content">
						<div class="inner">
							<h3>5. ¿Cuáles son los 3 productos más caros?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>db.Productos.find({},<br> { _id: 0, descripcion: 1, precio: 1 })<br>.sort({
								precio: -1 }).limit(3)</blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta5')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
				<section id="pregunta6"> <!-- Pregunta 6-->
					<img src="" data-src="https://sportswear-store-data-analysis-api.onrender.com/sales_by_month"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 710px; height: 600px;" />
					<div class="content">
						<div class="inner">
							<h3>6. ¿Cuál es el monto total de ventas por mes para cada año?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>{"$group": {<br>
								"_id": {<br>
								"year": { "$year": "$fechaCompra" },<br>
								"month": { "$month": "$fechaCompra" }},<br>
								"totalgeneradoVentas": { "$sum": "$costoTotal" }}},<br<br>>
									{"$sort": { "_id.year": 1, "_id.month": 1 }},<br><br>
									{"$project": {<br>
									"_id": 0,<br>
									"year": "$_id.year",<br>
									"month": "$_id.month",<br>
									"totalVentas": "$totalgeneradoVentas"}}</blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta6')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
				<section id="pregunta7"> <!-- Pregunta 7-->
					<img src="" data-src="https://sportswear-store-data-analysis-api.onrender.com/average_client_age"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 690px; height: 690px;" />
					<div class="content">
						<div class="inner">
							<h3>7. ¿Cuál es la edad promedio de los clientes por sexo?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>"$group": {<br>
								"_id": "$genero",<br>
								"promedioEdad": { "$avg": "$edad" }}</blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta7')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
				<section id="pregunta8"> <!-- Pregunta 8-->
					<img src=""
						data-src="https://sportswear-store-data-analysis-api.onrender.com/top_10_expensive_clients"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 690px; height: 690px;" />
					<div class="content">
						<div class="inner">
							<h3>8. ¿Qué clientes han realizado las 10 compras más caras en términos de costo total?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>{"$sort": { "costoTotal": -1 }},<br><br>
								{"$limit": 10},<br><br>
								{"$lookup": {<br>
								"from": "Personas",<br>
								"localField": "cuenta_usuario",<br>
								"foreignField": "cuentas.usuario",<br>
								"as": "cliente"}},<br><br>
								{"$unwind": "$cliente"},<br><br>
								{"$project": {<br>
								"_id": 0,<br>
								"nombre": "$cliente.nombre",<br>
								"correo": "$cliente.correo",<br>
								"telefono": "$cliente.telefono",<br>
								"costoTotal": 1}}</blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta8')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
				<section id="pregunta9"> <!-- Pregunta 9-->
					<img src=""
						data-src="https://sportswear-store-data-analysis-api.onrender.com/average_cost_by_section"
						alt="Presiona Cargar Gráfica" data-position="center center" class="image"
						style="width: 690px; height: 690px;" />
					<div class="content">
						<div class="inner">
							<h3>9. ¿Cuál es el coste medio de los artículos de cada sección (Hombre/Mujer/Nino)?</h3>
							<p>Con este query se obtuvieron los datos:</p>
							<blockquote>{"$match": { "tipoProducto": "Articulo" }},<br><br>
								{"$group": {<br>
								"_id": "$seccionArticulo",<br>
								"promedioCosto": { "$avg": "$precio" }}},<br><br>
								{"$project": {<br>
								"_id": 0,<br>
								"seccion": "$_id",<br>
								"promedioCosto": 1}}</blockquote>
							<ul class="actions">
								<button onclick="reloadImage('pregunta9')">Cargar Gráfica</button>
							</ul>
						</div>
					</div>
				</section>
				<br>
			</section>
		</section>

		<script>
			function loadImage(sectionId) {
				const section = document.getElementById(sectionId);
				const img = section.querySelector('img');
				const src = img.getAttribute('data-src');

				// Establece el atributo src con la URL real
				img.setAttribute('src', src);
			}

			function reloadImage(sectionId) {
				const section = document.getElementById(sectionId);
				const img = section.querySelector('img');
				const src = img.getAttribute('data-src');

				// Añade un parámetro único para evitar el caché del navegador
				img.setAttribute('src', `${src}?t=${new Date().getTime()}`);
			}
		</script>

	</div>

	<!-- Footer -->
	<footer id="footer" class="wrapper style1-alt">
		<div class="inner">
			<ul class="menu">
				<li>&copy; Sportswear Store. All rights reserved.</li>
				<li>Github <a href="https://github.com/DCajiao/sportswear_store_v2">Repo</a></li>
				<li>-</li>
			</ul>
		</div>
	</footer>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.scrollex.min.js"></script>
	<script src="assets/js/jquery.scrolly.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

	<!-- Script para CRUDS-->
	<script src="crud_script.js"></script>

</body>

</html>